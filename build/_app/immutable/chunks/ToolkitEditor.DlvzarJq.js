import{s as Fe,B as he,e as l,k as A,t as L,c as n,a as c,A as Ge,o as U,b as O,d,f as s,i as ke,g as e,C as X,u as oe,D as Ke,h as R,E as Ne,F as Ye,p as ze,j as Je,G as Qe}from"./scheduler.Dz-NSSWT.js";import{S as Xe,i as Ze,f as He,b as Me,d as Se,m as je,t as Be,a as Le,e as Oe}from"./index.CVQtJBk6.js";import{C as $e}from"./CodeEditor.CRE6lji0.js";import{g as et}from"./entry.DHDHOHwK.js";import{C as tt}from"./ConfirmDialog.2fUkeJzy.js";function at(t){let u,r,h,D=t[8].t("Please carefully review the following warnings:")+"",g,y,I,x,w=t[8].t("Tools have a function calling system that allows arbitrary code execution.")+"",b,E,q,m=t[8].t("Do not install tools from sources you do not fully trust.")+"",p,P,_,C=t[8].t("I acknowledge that I have read and I understand the implications of my action. I am aware of the risks associated with executing arbitrary code and I have verified the trustworthiness of the source.")+"",S;return{c(){u=l("div"),r=l("div"),h=l("div"),g=L(D),y=A(),I=l("ul"),x=l("li"),b=L(w),E=A(),q=l("li"),p=L(m),P=A(),_=l("div"),S=L(C),this.h()},l(i){u=n(i,"DIV",{class:!0});var v=c(u);r=n(v,"DIV",{class:!0});var j=c(r);h=n(j,"DIV",{});var k=c(h);g=O(k,D),k.forEach(d),y=U(j),I=n(j,"UL",{class:!0});var H=c(I);x=n(H,"LI",{});var W=c(x);b=O(W,w),W.forEach(d),E=U(H),q=n(H,"LI",{});var M=c(q);p=O(M,m),M.forEach(d),H.forEach(d),j.forEach(d),P=U(v),_=n(v,"DIV",{class:!0});var T=c(_);S=O(T,C),T.forEach(d),v.forEach(d),this.h()},h(){s(I,"class","mt-1 list-disc pl-4 text-xs"),s(r,"class","bg-yellow-500/20 text-yellow-700 dark:text-yellow-200 rounded-lg px-4 py-3"),s(_,"class","my-3"),s(u,"class","text-sm text-gray-500")},m(i,v){ke(i,u,v),e(u,r),e(r,h),e(h,g),e(r,y),e(r,I),e(I,x),e(x,b),e(I,E),e(I,q),e(q,p),e(u,P),e(u,_),e(_,S)},p(i,v){v&256&&D!==(D=i[8].t("Please carefully review the following warnings:")+"")&&R(g,D),v&256&&w!==(w=i[8].t("Tools have a function calling system that allows arbitrary code execution.")+"")&&R(b,w),v&256&&m!==(m=i[8].t("Do not install tools from sources you do not fully trust.")+"")&&R(p,m),v&256&&C!==(C=i[8].t("I acknowledge that I have read and I understand the implications of my action. I am aware of the risks associated with executing arbitrary code and I have verified the trustworthiness of the source.")+"")&&R(S,C)},d(i){i&&d(u)}}}function rt(t){let u,r,h,D,g,y,I='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M17 10a.75.75 0 01-.75.75H5.612l4.158 3.96a.75.75 0 11-1.04 1.08l-5.5-5.25a.75.75 0 010-1.08l5.5-5.25a.75.75 0 111.04 1.08L5.612 9.25H16.25A.75.75 0 0117 10z" clip-rule="evenodd"></path></svg>',x,w,b=t[8].t("Back")+"",E,q,m,p,P,_,C,S,i,v,j,k,H,W,M,T,Z,$,o,Y,N,z,ee=t[8].t("Warning:")+"",le,pe,te=t[8].t("Tools are a function calling system with arbitrary code execution")+"",ne,ve,ge,ye,J,ae=t[8].t("don't install random tools from sources you don't trust.")+"",ie,we,K,re=t[8].t("Save")+"",ue,de,B,be,V,Ee,Ie;function Re(a){t[17](a)}let Te={boilerplate:t[10]};t[3]!==void 0&&(Te.value=t[3]),T=new $e({props:Te}),he.push(()=>He(T,"value",Re)),t[18](T),T.$on("save",t[19]);function We(a){t[22](a)}let De={$$slots:{default:[at]},$$scope:{ctx:t}};return t[6]!==void 0&&(De.show=t[6]),B=new tt({props:De}),he.push(()=>He(B,"show",We)),B.$on("confirm",t[23]),{c(){u=l("div"),r=l("div"),h=l("form"),D=l("div"),g=l("button"),y=l("div"),y.innerHTML=I,x=A(),w=l("div"),E=L(b),q=A(),m=l("div"),p=l("div"),P=l("div"),_=l("input"),S=A(),i=l("input"),j=A(),k=l("input"),W=A(),M=l("div"),Me(T.$$.fragment),$=A(),o=l("div"),Y=l("div"),N=l("div"),z=l("span"),le=L(ee),pe=A(),ne=L(te),ve=A(),ge=l("br"),ye=L(`—
							`),J=l("span"),ie=L(ae),we=A(),K=l("button"),ue=L(re),de=A(),Me(B.$$.fragment),this.h()},l(a){u=n(a,"DIV",{class:!0});var f=c(u);r=n(f,"DIV",{class:!0});var se=c(r);h=n(se,"FORM",{class:!0});var F=c(h);D=n(F,"DIV",{class:!0});var xe=c(D);g=n(xe,"BUTTON",{class:!0,type:!0});var fe=c(g);y=n(fe,"DIV",{class:!0,"data-svelte-h":!0}),Ge(y)!=="svelte-1t52rj4"&&(y.innerHTML=I),x=U(fe),w=n(fe,"DIV",{class:!0});var qe=c(w);E=O(qe,b),qe.forEach(d),fe.forEach(d),xe.forEach(d),q=U(F),m=n(F,"DIV",{class:!0});var Q=c(m);p=n(Q,"DIV",{class:!0});var ce=c(p);P=n(ce,"DIV",{class:!0});var me=c(P);_=n(me,"INPUT",{class:!0,type:!0,placeholder:!0}),S=U(me),i=n(me,"INPUT",{class:!0,type:!0,placeholder:!0}),me.forEach(d),j=U(ce),k=n(ce,"INPUT",{class:!0,type:!0,placeholder:!0}),ce.forEach(d),W=U(Q),M=n(Q,"DIV",{class:!0});var Pe=c(M);Se(T.$$.fragment,Pe),Pe.forEach(d),$=U(Q),o=n(Q,"DIV",{class:!0});var _e=c(o);Y=n(_e,"DIV",{class:!0});var Ce=c(Y);N=n(Ce,"DIV",{class:!0});var G=c(N);z=n(G,"SPAN",{class:!0});var Ve=c(z);le=O(Ve,ee),Ve.forEach(d),pe=U(G),ne=O(G,te),ve=U(G),ge=n(G,"BR",{}),ye=O(G,`—
							`),J=n(G,"SPAN",{class:!0});var Ae=c(J);ie=O(Ae,ae),Ae.forEach(d),G.forEach(d),Ce.forEach(d),we=U(_e),K=n(_e,"BUTTON",{class:!0,type:!0});var Ue=c(K);ue=O(Ue,re),Ue.forEach(d),_e.forEach(d),Q.forEach(d),F.forEach(d),se.forEach(d),f.forEach(d),de=U(a),Se(B.$$.fragment,a),this.h()},h(){s(y,"class","self-center"),s(w,"class","self-center font-medium text-sm"),s(g,"class","flex space-x-1"),s(g,"type","button"),s(D,"class","mb-2.5"),s(_,"class","w-full px-3 py-2 text-sm font-medium bg-gray-50 dark:bg-gray-850 dark:text-gray-200 rounded-lg outline-none"),s(_,"type","text"),s(_,"placeholder",C=t[8].t("Toolkit Name (e.g. My ToolKit)")),_.required=!0,s(i,"class","w-full px-3 py-2 text-sm font-medium disabled:text-gray-300 dark:disabled:text-gray-700 bg-gray-50 dark:bg-gray-850 dark:text-gray-200 rounded-lg outline-none"),s(i,"type","text"),s(i,"placeholder",v=t[8].t("Toolkit ID (e.g. my_toolkit)")),i.required=!0,i.disabled=t[4],s(P,"class","flex gap-2 w-full"),s(k,"class","w-full px-3 py-2 text-sm font-medium bg-gray-50 dark:bg-gray-850 dark:text-gray-200 rounded-lg outline-none"),s(k,"type","text"),s(k,"placeholder",H=t[8].t("Toolkit Description (e.g. A toolkit for performing various operations)")),k.required=!0,s(p,"class","w-full mb-2 flex flex-col gap-1.5"),s(M,"class","mb-2 flex-1 overflow-auto h-0 rounded-lg"),s(z,"class","font-semibold dark:text-gray-200"),s(J,"class","font-medium dark:text-gray-400"),s(N,"class","text-xs text-gray-500 line-clamp-2"),s(Y,"class","flex-1 pr-3"),s(K,"class","px-3 py-1.5 text-sm font-medium bg-emerald-600 hover:bg-emerald-700 text-gray-50 transition rounded-lg"),s(K,"type","submit"),s(o,"class","pb-3 flex justify-between"),s(m,"class","flex flex-col flex-1 overflow-auto h-0 rounded-lg"),s(h,"class","flex flex-col max-h-[100dvh] h-full"),s(r,"class","mx-auto w-full md:px-0 h-full"),s(u,"class","flex flex-col justify-between w-full overflow-y-auto h-full")},m(a,f){ke(a,u,f),e(u,r),e(r,h),e(h,D),e(D,g),e(g,y),e(g,x),e(g,w),e(w,E),e(h,q),e(h,m),e(m,p),e(p,P),e(P,_),X(_,t[0]),e(P,S),e(P,i),X(i,t[1]),e(p,j),e(p,k),X(k,t[2].description),e(m,W),e(m,M),je(T,M,null),e(m,$),e(m,o),e(o,Y),e(Y,N),e(N,z),e(z,le),e(N,pe),e(N,ne),e(N,ve),e(N,ge),e(N,ye),e(N,J),e(J,ie),e(o,we),e(o,K),e(K,ue),t[20](h),ke(a,de,f),je(B,a,f),V=!0,Ee||(Ie=[oe(g,"click",t[13]),oe(_,"input",t[14]),oe(i,"input",t[15]),oe(k,"input",t[16]),oe(h,"submit",Ke(t[21]))],Ee=!0)},p(a,[f]){(!V||f&256)&&b!==(b=a[8].t("Back")+"")&&R(E,b),(!V||f&256&&C!==(C=a[8].t("Toolkit Name (e.g. My ToolKit)")))&&s(_,"placeholder",C),f&1&&_.value!==a[0]&&X(_,a[0]),(!V||f&256&&v!==(v=a[8].t("Toolkit ID (e.g. my_toolkit)")))&&s(i,"placeholder",v),(!V||f&16)&&(i.disabled=a[4]),f&2&&i.value!==a[1]&&X(i,a[1]),(!V||f&256&&H!==(H=a[8].t("Toolkit Description (e.g. A toolkit for performing various operations)")))&&s(k,"placeholder",H),f&4&&k.value!==a[2].description&&X(k,a[2].description);const se={};!Z&&f&8&&(Z=!0,se.value=a[3],Ne(()=>Z=!1)),T.$set(se),(!V||f&256)&&ee!==(ee=a[8].t("Warning:")+"")&&R(le,ee),(!V||f&256)&&te!==(te=a[8].t("Tools are a function calling system with arbitrary code execution")+"")&&R(ne,te),(!V||f&256)&&ae!==(ae=a[8].t("don't install random tools from sources you don't trust.")+"")&&R(ie,ae),(!V||f&256)&&re!==(re=a[8].t("Save")+"")&&R(ue,re);const F={};f&134217984&&(F.$$scope={dirty:f,ctx:a}),!be&&f&64&&(be=!0,F.show=a[6],Ne(()=>be=!1)),B.$set(F)},i(a){V||(Be(T.$$.fragment,a),Be(B.$$.fragment,a),V=!0)},o(a){Le(T.$$.fragment,a),Le(B.$$.fragment,a),V=!1},d(a){a&&(d(u),d(de)),t[18](null),Oe(T),t[20](null),Oe(B,a),Ee=!1,Ye(Ie)}}}function st(t,u,r){let h;const D=ze("i18n");Je(t,D,o=>r(8,h=o));const g=Qe();let y=null,I=!1,{edit:x=!1}=u,{clone:w=!1}=u,{id:b=""}=u,{name:E=""}=u,{meta:q={description:""}}=u,{content:m=""}=u,p,P=`import os
import requests
from datetime import datetime


class Tools:
    def __init__(self):
        pass

    # Add your custom tools using pure Python code here, make sure to add type hints
    # Use Sphinx-style docstrings to document your tools, they will be used for generating tools specifications
    # Please refer to function_calling_filter_pipeline.py file from pipelines project for an example

    def get_user_name_and_email_and_id(self, __user__: dict = {}) -> str:
        """
        Get the user name, Email and ID from the user object.
        """

        # Do not include :param for __user__ in the docstring as it should not be shown in the tool's specification
        # The session user object will be passed as a parameter when the function is called

        print(__user__)
        result = ""

        if "name" in __user__:
            result += f"User: {__user__['name']}"
        if "id" in __user__:
            result += f" (ID: {__user__['id']})"
        if "email" in __user__:
            result += f" (Email: {__user__['email']})"

        if result == "":
            result = "User: Unknown"

        return result

    def get_current_time(self) -> str:
        """
        Get the current time in a more human-readable format.
        :return: The current time.
        """

        now = datetime.now()
        current_time = now.strftime("%I:%M:%S %p")  # Using 12-hour format with AM/PM
        current_date = now.strftime(
            "%A, %B %d, %Y"
        )  # Full weekday, month name, day, and year

        return f"Current Date and Time = {current_date}, {current_time}"

    def calculator(self, equation: str) -> str:
        """
        Calculate the result of an equation.
        :param equation: The equation to calculate.
        """

        # Avoid using eval in production code
        # https://nedbatchelder.com/blog/201206/eval_really_is_dangerous.html
        try:
            result = eval(equation)
            return f"{equation} = {result}"
        except Exception as e:
            print(e)
            return "Invalid equation"

    def get_current_weather(self, city: str) -> str:
        """
        Get the current weather for a given city.
        :param city: The name of the city to get the weather for.
        :return: The current weather information or an error message.
        """
        api_key = os.getenv("OPENWEATHER_API_KEY")
        if not api_key:
            return (
                "API key is not set in the environment variable 'OPENWEATHER_API_KEY'."
            )

        base_url = "http://api.openweathermap.org/data/2.5/weather"
        params = {
            "q": city,
            "appid": api_key,
            "units": "metric",  # Optional: Use 'imperial' for Fahrenheit
        }

        try:
            response = requests.get(base_url, params=params)
            response.raise_for_status()  # Raise HTTPError for bad responses (4xx and 5xx)
            data = response.json()

            if data.get("cod") != 200:
                return f"Error fetching weather data: {data.get('message')}"

            weather_description = data["weather"][0]["description"]
            temperature = data["main"]["temp"]
            humidity = data["main"]["humidity"]
            wind_speed = data["wind"]["speed"]

            return f"Weather in {city}: {temperature}°C"
        except requests.RequestException as e:
            return f"Error fetching weather data: {str(e)}"
`;const _=async()=>{g("save",{id:b,name:E,meta:q,content:m})},C=async()=>{p&&await p.formatPythonCodeHandler()&&(console.log("Code formatted successfully"),_())},S=()=>{et("/workspace/tools")};function i(){E=this.value,r(0,E)}function v(){b=this.value,r(1,b),r(0,E),r(4,x),r(12,w)}function j(){q.description=this.value,r(2,q)}function k(o){m=o,r(3,m)}function H(o){he[o?"unshift":"push"](()=>{p=o,r(7,p)})}const W=()=>{y&&y.requestSubmit()};function M(o){he[o?"unshift":"push"](()=>{y=o,r(5,y)})}const T=()=>{x?C():r(6,I=!0)};function Z(o){I=o,r(6,I)}const $=()=>{C()};return t.$$set=o=>{"edit"in o&&r(4,x=o.edit),"clone"in o&&r(12,w=o.clone),"id"in o&&r(1,b=o.id),"name"in o&&r(0,E=o.name),"meta"in o&&r(2,q=o.meta),"content"in o&&r(3,m=o.content)},t.$$.update=()=>{t.$$.dirty&4113&&E&&!x&&!w&&r(1,b=E.replace(/\s+/g,"_").toLowerCase())},[E,b,q,m,x,y,I,p,h,D,P,C,w,S,i,v,j,k,H,W,M,T,Z,$]}class dt extends Xe{constructor(u){super(),Ze(this,u,st,rt,Fe,{edit:4,clone:12,id:1,name:0,meta:2,content:3})}}export{dt as T};
//# sourceMappingURL=ToolkitEditor.DlvzarJq.js.map
